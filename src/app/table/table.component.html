<mat-spinner *ngIf="data === undefined; else display"></mat-spinner>
<ng-template #display>

  <table mat-table [dataSource]="data" style="width:100%">

    <ng-container *ngFor="let column of columns">
      <ng-container [matColumnDef]="column.field">
        <th mat-header-cell *matHeaderCellDef> {{column.header}} </th>
        <td mat-cell *matCellDef="let element">
          <ng-container [ngSwitch]="column.type">
            <div *ngSwitchCase="'string'">
              {{element[column.field]}}
            </div>
            <div *ngSwitchCase="'boolean'">
              {{element[column.field]}} bool
            </div>
            <div *ngSwitchCase="'boolean-edit'">
              <mat-slide-toggle [checked]="element[column.field]" (change)="onSlideChange(element, column, $event.checked)"></mat-slide-toggle>

            </div>

            <div *ngSwitchDefault>
              Non mapped field {{column.field}}
            </div>

          </ng-container>

        </td>
      </ng-container>

    </ng-container>


    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>  </table>
</ng-template>
